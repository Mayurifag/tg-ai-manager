{% if current_user and current_user.debug_mode %}
<aside class="sidebar right-sidebar">
    <div class="sidebar-feed">
        <div class="settings-header" style="color: #6ab7ff;">Live Events (Debug)</div>
        <div id="event-feed-list">
            {% if recent_events %}
            {% for event in recent_events %}
            {% if event.type not in ['read', 'edited', 'raw'] %}
            <div class="event-item type-{{ event.type }}">
                <div class="event-header">
                    {% if event.type == 'deleted' %}
                    <span class="event-type-icon" title="Deleted">ğŸ—‘ï¸</span>
                    {% elif event.type == 'action' %}
                    <span class="event-type-icon" title="Action">âš¡</span>
                    {% elif event.type == 'reaction_update' %}
                    <span class="event-type-icon" title="Reaction">ğŸ‘</span>
                    {% endif %}

                    <a href="{{ event.link or '#' }}" class="event-chat-link" {% if event.topic_name %}title="{{ event.topic_name }}" {% endif %}>
                        {{ event.topic_name ~ ' - ' if event.topic_name else '' }}{{ event.chat_name }}
                    </a>
                </div>

                <div class="event-text-wrapper" data-full-html="{{ event | to_json | escape }}">
                    <div class="event-text">
                        {{ event.text | safe }}
                    </div>
                </div>
            </div>
            {% endif %}
            {% endfor %}
            {% else %}
            <div class="empty-feed">No recent events</div>
            {% endif %}
        </div>
    </div>
</aside>
{% endif %}